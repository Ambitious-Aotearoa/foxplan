{# templates/_sections/testimonials/testimonial-two.twig #}

{% set defaults = {
    sectionTitle: 'Hear what our clients are saying',
    backgroundColor: 'bg-[#F4EFE1]',
    textColor: 'text-[#270E15]',
    quoteIconColor: 'bg-[#F9C33D]',

btnBgColor: 'bg-foxplan-charcoal-brown',
btnTextColor: 'text-foxplan-yellow',
btnHoverBgColor: 'hover:bg-foxplan-yellow',
btnHoverTextColor: 'hover:text-foxplan-charcoal-brown',

arrowImage: 'images/placeholder/Arrow_Dotted_Charcoal.png',
testimonials: [
{
body: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.',
author: 'LOREM IPSUM'
},
{
body: 'Second client feedback example. FoxPlan helped us navigate the complexity of our first mortgage with ease and transparency. Highly recommended for anyone looking to invest.',
author: 'JANE DOE'
}
]
} %}

{% set data = defaults | merge(props | default({})) %}

{# Typography Classes #}
{% set sectionTitleClasses = 'font-serif text-5xl md:text-[4.5rem] font-light leading-[0.85] tracking-tight ' ~ data.textColor %}
{% set cardBodyClasses = 'font-aktiv text-lg md:text-[1.6rem] leading-relaxed mb-10 opacity-90 ' ~ data.textColor %}
{% set cardAuthorClasses = 'font-aktiv text-[13px] font-bold tracking-[0.2em] uppercase ' ~ data.textColor %}

<section
        class="w-full relative {{ data.backgroundColor }} pt-24 pb-24 overflow-hidden border-t-[20px] border-r-[20px] border-foxplan-charcoal-brown"
        x-data="{
            active: 0,
            total: {{ data.testimonials | length }},
        next() { this.active = (this.active + 1) % this.total },
        prev() { this.active = (this.active - 1 + this.total) % this.total }
    }"
>
    <div class="w-full">

        {# 1. Title Row: 30/70 Split #}
        <div class="flex flex-wrap w-full items-center mb-16 md:mb-24">
            <div class="hidden md:flex w-[30%] items-center justify-start pr-12">
                {% if data.arrowImage %}
                <img src="{{ craft.vite.asset(data.arrowImage) }}"
                     alt="Arrow Decor"
                     class="w-full h-auto object-contain max-h-8"
                     style="filter: brightness(0) saturate(100%) invert(8%) sepia(16%) show(12%) hue-rotate(305deg) brightness(95%) contrast(96%);">
    {% endif %}
    </div>

    <div class="w-full md:w-[70%] px-8 md:px-0">
        <h2 class="{{ sectionTitleClasses }}">
            {{ data.sectionTitle | raw }}
        </h2>
    </div>
    </div>

    {# 2. Content Row: 30/70 Split #}
    <div class="flex flex-wrap w-full items-start">
        <div class="hidden md:block md:w-[30%]"></div>

        <div class="w-full md:w-[70%] px-8 md:px-0 pr-8 md:pr-24 lg:pr-32">
            <div class="relative">
                {% for index, testimonial in data.testimonials %}
                    <div
                            x-show="active === {{ index }}"
                            x-transition:enter="transition ease-out duration-500"
                            x-transition:enter-start="opacity-0 transform translate-x-4"
                            x-transition:enter-end="opacity-100 transform translate-x-0"
                            class="w-full"
                    >
                        {# Quote Icon #}
                        <div class="w-12 h-12 {{ data.quoteIconColor }} flex items-center justify-center mb-10">
                            <svg width="24" height="18" viewBox="0 0 24 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 18V10.2857L4.11429 0H9.25714L6.17143 10.2857H9.25714V18H0ZM14.7429 18V10.2857L18.8571 0H24L20.9143 10.2857H24V18H14.7429Z" fill="#270E15"/>
                            </svg>
                        </div>

                        <p class="{{ cardBodyClasses }} w-full">
                            {{ testimonial.body }}
                        </p>

                        <p class="{{ cardAuthorClasses }} mb-16">
                            {{ testimonial.author }}
                        </p>
                    </div>
                {% endfor %}
            </div>

            {# Navigation Arrows: Solid Charcoal with Yellow text #}
            <div class="flex items-center gap-4">
                <button
                        @click="prev()"
                        class="w-12 h-12 rounded-full border border-foxplan-charcoal-brown {{ data.btnBgColor }} {{ data.btnTextColor }} flex items-center justify-center transition-all duration-300 {{ data.btnHoverBgColor }} {{ data.btnHoverTextColor }}"
                >
                    <span class="text-xl">←</span>
                </button>
                <button
                        @click="next()"
                        class="w-12 h-12 rounded-full border border-foxplan-charcoal-brown {{ data.btnBgColor }} {{ data.btnTextColor }} flex items-center justify-center transition-all duration-300 {{ data.btnHoverBgColor }} {{ data.btnHoverTextColor }}"
                >
                    <span class="text-xl">→</span>
                </button>
            </div>
        </div>
    </div>
    </div>
</section>