{# templates/_sections/services/our-services.twig #}

{% set defaults = {
    title: 'Services',
    backgroundColor: 'bg-white',
    items: [],
    buttonBgColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-white'
} %}

{% set data = defaults | merge(props | default({})) %}
{% set groupedItems = data.items | batch(2) %}

<section class="w-full relative z-20 pt-16 pb-16 md:pt-24 md:pb-32 {{ data.backgroundColor }} overflow-hidden">
    <div class="w-full">
        <div class="flex flex-col md:flex-row w-full items-start justify-start">

            {# --- Left Side: 30% Width --- #}
            <div class="w-full md:w-[30%] pl-8 md:pl-10 pr-4 mb-12 md:mb-0 flex flex-col items-start text-left">
                <div class="max-w-md">
                    <h2 class="font-serif text-5xl lg:text-[5.5rem] font-light leading-[0.9] text-foxplan-charcoal-brown tracking-tight">
                        {{ data.title | raw }}
                    </h2>
                </div>
            </div>

            {# --- Right Side: 70% Width --- #}
            <div class="w-full md:w-[70%]">
                <div class="w-full pl-10 pr-8 md:pr-20">
                    {% for group in groupedItems %}
                        {# Using gap-x-16 to ensure a healthy aisle between full-width text blocks #}
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-16 gap-y-16 mb-16 last:mb-0 items-start">

                            {% for item in group %}
                                <div class="flex flex-col h-full items-start text-left">
                                    <h3 class="font-serif text-3xl md:text-[2.4rem] font-light leading-tight text-foxplan-charcoal-brown mb-4">
                                        {{ item.title }}
                                    </h3>

                                    {# Removed max-w-[320px] and added w-full to allow text to expand #}
                                    <div class="font-aktiv text-[15px] text-foxplan-charcoal-brown/80 leading-relaxed mb-8 w-full">
                                        {{ item.text | raw }}
                                    </div>

                                    <div class="mt-auto">
                                        {% include '_components/ui/button/button.twig' with {
                                            props: {
                                                text: 'LEARN MORE',
                                                url: item.link,
                                                style: 'primary',
                                                backgroundColor: data.buttonBgColor,
                                                textColor: data.buttonTextColor,
                                                classes: 'rounded-none'
                                            }
                                        } only %}
                                    </div>
                                </div>
                            {% endfor %}

                        </div>
                    {% endfor %}
                </div>
            </div>

        </div>
    </div>
</section>