<section
        x-show="showBookCallOverlay"
        {# Strict Scroll Lock Logic #}
        x-init="$watch('showBookCallOverlay', value => {
        if (value) {
            document.documentElement.style.overflow = 'hidden';
            document.body.style.overflow = 'hidden';
        } else {
            document.documentElement.style.overflow = '';
            document.body.style.overflow = '';
        }
    })"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        {# z-[9999] ensures the navbar and page content are fully blurred #}
        class="fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm"
        x-cloak
>
    {# Modal Container - Foxplan Neutral Beige [#f9efd8] #}
    <div
            @click.away="showBookCallOverlay = false"
            class="relative w-full max-w-4xl bg-[#f9efd8] shadow-2xl p-6 md:p-12 overflow-y-auto max-h-[95vh]"
    >
        {# Close Button #}
        <button @click="showBookCallOverlay = false" class="absolute top-6 right-6 text-[#270e15] hover:opacity-60 transition-opacity z-50">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>

        <div class="w-full">
            <div class="text-center md:text-left mb-4">
                <h2 class="font-serif text-5xl md:text-6xl text-[#270e15] mb-2">Book a Discovery Call</h2>
                <p class="text-lg text-gray-700">Select a time that works for you to speak with one of our advisers.</p>
            </div>

            <div class="border-t border-[#270e15]/10 pt-4">
                {# Calendly Discovery Call Widget #}
                <div
                        class="calendly-inline-widget"
                        data-url="https://calendly.com/foxplansales/discovery-phone-call-clone?hide_event_type_details=1&background_color=f9efd8&primary_color=270e15&text_color=270e15"
                        style="min-width:320px;height:700px;"
                ></div>
            </div>
        </div>
    </div>
</section>

{# Ensure the Calendly script is registered #}
{% js "https://assets.calendly.com/assets/external/widget.js" %}