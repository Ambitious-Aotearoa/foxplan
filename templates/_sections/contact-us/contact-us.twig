
{% set descriptionClasses = 'mb-12 text-foxplan-charcoal-brown font-aktiv font-medium opacity-80' %}
{% set descriptionStyle = 'font-size: clamp(1rem, 0.4vw + 0.8rem, 1.1rem); line-height: 1.4;' %}
{% set tabTitleClasses = 'font-serif font-light text-foxplan-charcoal-brown mb-10 tracking-tighter break-normal' %}
{% set tabTitleStyle = 'font-size: clamp(2.75rem, 6vw + 1rem, 7rem); line-height: 0.85; word-break: keep-all;' %}



{% macro render_tab_layout(title, body, descriptionClasses, descriptionStyle, tabTitleClasses, tabTitleStyle, mode = 'form') %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-12 gap-x-12 lg:gap-x-24 mt-4 px-0 items-start">

    {# Left Column: Architectural Title and Description #}
    <div class="lg:col-span-6">
        <h3 class="{{ tabTitleClasses }}" style="{{ tabTitleStyle }}">
            {{ title }}
        </h3>
        <div class="{{ descriptionClasses }}" style="{{ descriptionStyle }}">
            {{ body|raw }}
        </div>
    </div>

    {# Right Column: Content Area #}
    <div class="lg:col-span-6 pt-4 lg:pt-16">
        {% if mode == 'form' %}
            {{ include('_components/form/Contact-form.twig', {
                props: { submitText: 'Submit' }
            }) | raw }}

            {# Fixed: Changed 'elif' to 'elseif' #}
        {% elseif mode == 'calendly' %}
            <div class="w-full overflow-hidden" style="height: 750px;">
                <div class="calendly-inline-widget"
                     data-url="https://calendly.com/foxplansales/discovery-phone-call-clone?hide_event_type_details=1&background_color=f4f1ea&text_color=2d2926&primary_color=e9bc44"
                     style="min-width:320px;height:100%;">
                </div>
                <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
            </div>

            {# Fixed: Changed 'elif' to 'elseif' #}
        {% elseif mode == 'map' %}
            <div class="w-full aspect-[4/3] bg-white flex items-center justify-center border border-foxplan-charcoal-brown/5 shadow-sm">
                <p class="font-aktiv text-[10px] uppercase tracking-widest text-foxplan-charcoal-brown/30 italic">
                    Map here soon
                </p>
            </div>
        {% endif %}
    </div>
</div>
{% endmacro %}

{% import _self as macros %}

{# --- 3. COMPONENT DATA --- #}
{% set tabsComponentData = {
    defaultTab: 'call',
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-foxplan-charcoal-brown',
    tabs: [
        {
            id: 'call',
            label: 'Get in touch',
            content: macros.render_tab_layout(
            entry.contactMainHeading2 ?? 'Get in touch',
            entry.contactBodytext2 ?? '',
            descriptionClasses, descriptionStyle, tabTitleClasses, tabTitleStyle, 'form'
        )
        },
        {
            id: 'callback',
            label: 'Book an adviser',
            content: macros.render_tab_layout(
            entry.contactMainHeading3 ?? 'Book an adviser',
            entry.contactBodytext3 ?? '',
            descriptionClasses, descriptionStyle, tabTitleClasses, tabTitleStyle, 'calendly'
        )
        },
        {
            id: 'location',
            label: 'Our Location',
            content: macros.render_tab_layout(
            entry.contactMainHeading ?? 'Our Location',
            entry.contactBodytext ?? '',
            descriptionClasses, descriptionStyle, tabTitleClasses, tabTitleStyle, 'map'
        )
        }
    ]
} %}

{# --- 4. RENDER --- #}
<section class="w-full bg-foxplan-neutral-beige pt-24 pb-32 overflow-x-hidden">
    <div class="w-full px-4 md:px-8 lg:px-16">
        {% include '_components/ui/tabs/tabs.twig' with { data: tabsComponentData } %}
    </div>
</section>