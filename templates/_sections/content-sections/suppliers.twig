{# templates/_sections/content-sections/suppliers.twig #}

{% set sectionData = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-foxplan-charcoal-brown',
    cardBg: 'bg-white/40',
    tabs: []
} | merge(data ?? {}) %}

<div class="w-full {{ sectionData.backgroundColor }}">
    {# 2. Content Area #}
    <div class="px-8 md:px-12 pt-16 pb-24">
        {% for tab in sectionData.tabs %}
            <div
                    x-show="activeTab === '{{ tab.id }}'"
                    x-cloak
                    x-transition:enter="transition ease-out duration-500"
                    x-transition:enter-start="opacity-0 translate-y-4"
                    x-transition:enter-end="opacity-100 translate-y-0"
            >
                {# Heading #}
                <h2 data-aos="fade-up" class="font-serif text-5xl md:text-6xl {{ sectionData.textColor }} mb-12 leading-tight max-w-4xl">
                    {{ tab.title }}
                </h2>

                {# Supplier Grid #}
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                    {% for supplier in tab.suppliers %}
                        <div class="flex flex-col p-6 {{ sectionData.cardBg }} group" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">

                            {# Logo Area #}
                            <div class="w-full h-40 bg-black/5 mb-6 flex items-center justify-center p-6 transition-colors group-hover:bg-black/10">
                                {% if supplier.logo is defined and supplier.logo is not empty %}
                                    <img src="{{ craft.vite.asset(supplier.logo) }}" alt="{{ supplier.name }}" class="max-h-full w-auto object-contain">
                                {% else %}
                                    <span class="text-3xl font-serif opacity-20 uppercase">{{ supplier.name|first }}</span>
                                {% endif %}
                            </div>

                            <h3 class="text-2xl font-serif {{ sectionData.textColor }} mb-3">
                                {{ supplier.name }}
                            </h3>

                            {# Contact Details #}
                            <div class="{{ sectionData.textColor }} font-aktiv-grotesk text-sm space-y-1 mb-8 opacity-75">
                                {% if supplier.general is defined and supplier.general is not empty %}
                                    <span class="block">Investments: {{ supplier.contact }}</span>
                                    <span class="block">General: {{ supplier.general }}</span>
                                {% else %}
                                    <span class="block">Contact: {{ supplier.contact }}</span>
                                {% endif %}
                            </div>

                            {# Visit Site Button #}
                            <div class="mt-auto">
                                <a href="{{ supplier.url ?? '#' }}"
                                   class="bg-foxplan-charcoal-brown text-white inline-flex items-center justify-between w-full px-6 py-4 text-xs font-bold uppercase tracking-widest transition-all hover:bg-black group/btn">
                                    <span>Visit site</span>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="transition-transform group-hover/btn:translate-x-1">
                                        <path d="M5 12h14 m-7-7 7 7-7 7" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>
</div>