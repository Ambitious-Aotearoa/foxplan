{# File: templates/_sections/content-sections/benefits-arc.twig #}

{# --- Handle Dynamic Colors --- #}
{% set bgColor = backgroundColor ?? 'bg-[#F9F6EE]' %}
{% set txtColor = textColor ?? 'text-[#2D2926]' %}

{# --- Ensure servicesData exists --- #}
{% set servicesData = servicesData ?? {
    heading: 'Accounting to keep<br>things humming',
    intro: 'Your FoxPlan mortgage adviser can take care of the tricky questions, applications, and lender communications.',
    items: []
} %}

{% set headingClasses = 'font-serif text-5xl lg:text-[5.5rem] font-light leading-[0.8] tracking-tight ' ~ txtColor %}
{% set introClasses = 'font-aktiv-grotesk text-lg leading-relaxed mb-12 max-w-2xl ' ~ txtColor %}

<section
        class="w-full {{ bgColor }} relative overflow-hidden"
        x-data="{ revealed: false }"
        x-intersect.threshold.20="revealed = true"
>

    {# 1. MAIN ROW: 25/75 Split for Arrow and Heading #}
    <div class="w-full flex flex-wrap items-start pt-24 md:pt-32">

        {# LEFT COLUMN: 25% Width for the Arrow Head #}
        <div class="hidden md:flex w-[25%] items-center justify-end pt-6 lg:pt-10">
            <div
                    class="transition-all duration-[2000ms] ease-out"
                    :style="revealed ? 'opacity: 1; transform: translateX(0);' : 'opacity: 0; transform: translateX(-20px);'"
            >
                {# Arrow Head #}
                <div class="flex-shrink-0 mr-4">
                    <img
                            src="{{ craft.vite.asset('images/placeholder/Arrow_1.svg') }}"
                            alt="Arrow"
                            class="h-4 w-auto block"
                            style="filter: brightness(0) saturate(100%);"
                    >
                </div>
            </div>
        </div>

        {# RIGHT COLUMN: 75% Width for Heading #}
        <div class="w-full md:w-[75%] px-8 md:px-0">
            <h2 class="{{ headingClasses }}">
                {{ servicesData.heading | raw }}
            </h2>
        </div>
    </div>

    {# 2. ACCORDION ROW: Offset to the 75% column #}
    <div class="w-full flex flex-wrap justify-end pb-72 mt-12">
        <div class="w-full md:w-[75%] px-8 md:px-0 pr-8 md:pr-24 relative z-10">
            {% if servicesData.intro %}
                <p class="{{ introClasses }}">
                    {{ servicesData.intro }}
                </p>
            {% endif %}

            <div class="w-full">
                {{ include('_components/ui/accordion/accordion.twig', {
                    props: {
                        items: servicesData.items,
                        defaultOpen: 0,
                        titleFont: 'font-serif',
                        titleSize: 'text-2xl md:text-3xl',
                        classes: 'px-0 mb-8',
                        backgroundColor: 'bg-foxplan-white',
                        textColor: txtColor,
                        iconBgColor: 'bg-[#E5E5E5]',
                        iconTextColor: 'text-white'
                    }
                }) }}
            </div>
        </div>
    </div>

    {# 3. ARC IMAGE (Background Decor) #}
    <div class="absolute bottom-0 left-0 w-full z-0 pointer-events-none">
        <img
                src="{{ craft.vite.asset('images/placeholder/Arc_2.svg') }}"
                alt="Background Decor"
                class="w-full h-auto block opacity-50"
                style="filter: drop-shadow(0.8px 0.8px 0px #2D2926);"
        >
    </div>

</section>

{# Plugins #}
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>