{# _sections/content-sections/link-to-insights.twig #}

{#
Fetching the current category and related articles from Craft

#}
{% set currentCategory = entry.articleCategories.one() %}
{% set relatedArticles = craft.entries()
    .section('article')
    .relatedTo(currentCategory)
    .id('not ' ~ entry.id)
    .limit(3)
    .all() %}

{% if relatedArticles|length > 0 %}
    <section class="w-full bg-[#231111] pt-16 pb-20">
        <div class="px-[20px]">

            {# Smaller, more modest Heading #}
            <h2 class="font-serif text-[#D4AF37] text-[3rem] md:text-[3.5rem] font-light mb-12">
                Read Next
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-x-10 lg:gap-x-16">
                {% for article in relatedArticles %}
                    <div class="pt-6 pb-8 border-t border-[#D4AF37]/30 flex flex-col items-start">

                        {# Date and Metadata #}
                        <p class="font-montreal text-[10px] uppercase tracking-[0.2em] text-[#D4AF37]/60 mb-3">
                            {{ article.postDate | date('F d, Y') | upper }}
                        </p>

                        {# Article Title: Compact and Serif #}
                        <a href="{{ article.url }}" class="group">
                            <h3 class="font-serif text-[1.6rem] lg:text-[1.8rem] leading-tight text-[#D4AF37] mb-6 group-hover:opacity-80 transition-opacity">
                                {{ article.title }}
                            </h3>
                        </a>

                        {# Read More Link #}
                        <a href="{{ article.url }}" class="font-montreal text-[9px] uppercase tracking-[0.2em] text-[#D4AF37] hover:text-white transition-colors">
                            READ MORE
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endif %}