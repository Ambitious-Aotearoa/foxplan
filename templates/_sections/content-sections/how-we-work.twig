{# 1. Map Backend Data based on Screenshots #}
{% set props = {
    mainHeading: entry.paragraphHeading2 ?? 'How we work with you',
    mainBody: entry.bodyText ?? 'Weâ€™ll work with you the entire way...',
    accordionItems: entry.accordion.all() ?? [],

    backgroundColor: 'bg-foxplan-yellow',
    textColor: 'text-foxplan-charcoal-brown'
    } %}

    {% set data = props %}

    <section class="w-full relative z-20 {{ data.backgroundColor }} pt-16 md:pt-24 pb-16 md:pb-24 overflow-hidden">
    <div class="w-full">
        <div class="flex flex-wrap w-full items-start">

            {# Left Side: 30% Width #}
            <div class="w-full md:w-[30%] pl-8 md:pl-10 pr-12 mb-12 md:mb-0">
                <div class="max-w-md">
                    <h2 class="font-serif text-5xl lg:text-[5.5rem] font-light leading-[0.8] {{ data.textColor }} tracking-tight mb-8">
                        {{ data.mainHeading | raw }}
                    </h2>
                    <div class="font-aktiv text-base md:text-lg leading-relaxed {{ data.textColor }} opacity-80">
                        {{ data.mainBody | raw }}
                    </div>
                </div>
            </div>

            {# Right Side: 70% Width #}
            <div class="w-full md:w-[70%]">
                <div class="w-full">
                    {% if data.accordionItems|length > 0 %}
                        {# We transform the Matrix data to match what your accordion component expects #}
                        {% set formattedItems = [] %}
                        {% for item in data.accordionItems %}
                            {% set formattedItems = formattedItems | merge([{
                                expandableHeadingTitle: item.accordionHeading,
                                ExpandableBodyText: item.accordionBodyText
                            }]) %}
                        {% endfor %}

                        {% include '_components/ui/accordion/accordion.twig' with {
                            props: {
                                items: formattedItems,
                                defaultOpen: 0,
                                titleFont: 'font-serif',
                                titleSize: 'text-2xl md:text-[2.6rem]',
                                titleWeight: 'font-light',
                                textColor: data.textColor,
                                backgroundColor: 'bg-foxplan-white',
                                classes: 'w-full'
                            }
                        } only %}
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</section>