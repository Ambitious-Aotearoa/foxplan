{# templates/_sections/content-sections/contact-cta.twig #}

{% set entryImage = entry.heroImage.one() ?? null %}

{% set defaults = {
    title: entry.title ?? 'Contact us',
    bodyText: entry.heroBodyText ?? '',
    buttonText: entry.button ?? '',
    buttonLink: entry.buttonLink ?? '#',
    imageSrc: entryImage ? entryImage.url : 'images/Contact_1.jpg',
    maskSrc: 'images/placeholder/fox-tail_mask1.svg',
    backgroundColor: 'bg-[#F9C33D]',
    textColor: 'text-[#270E15]',
} %}

{% set data = defaults | merge(props | default({})) %}

<section class="{{ data.backgroundColor }} w-full overflow-hidden relative">
    <div class="grid grid-cols-1 lg:grid-cols-2 items-stretch min-h-[600px] lg:min-h-[800px]">

        {# 1. TEXT COLUMN - Aligned to the Upper Left with tightened constraints #}
        <div class="flex flex-col justify-start px-[40px] md:px-[60px] lg:pl-[80px] lg:pr-12 pt-24 pb-12 relative z-20">

            {# Title: Majestic and high #}
            <h1 class="font-serif text-[4.5rem] md:text-[6.5rem] lg:text-[8.5rem] font-normal {{ data.textColor }} leading-[0.85] mb-6 tracking-tighter">
                {{ data.title | raw }}
            </h1>

            {#
            BODY TEXT: Reduced max-width (max-w-[320px]) and light weight
            to match your evidence
            #}
            {% if data.bodyText is not empty %}
                <p class="font-aktiv-grotesk font-light text-lg md:text-xl {{ data.textColor }} leading-[1.1] mb-10 max-w-[320px]">
                    {{ data.bodyText | raw }}
                </p>
            {% endif %}

            {# Button: Obedient to the CMS #}
            {% if data.buttonText is not empty %}
                <div class="flex">
                    {% include '_components/ui/button/button.twig' with {
                        props: {
                            text: data.buttonText,
                            url: data.buttonLink,
                            backgroundColor: 'bg-[#1D1013]',
                            textColor: 'text-white',
                            classes: 'px-8 py-3 text-[10px] tracking-[0.2em] uppercase font-montreal rounded-none'
                        }
                    } only %}
                </div>
            {% endif %}
        </div>

        {# 2. IMAGE COLUMN - Pinned to the very bottom right #}
        <div class="relative lg:min-h-full overflow-hidden">
            <div
                    class="absolute inset-0 w-full h-full"
                    style="
                            background-image: url('{{ data.imageSrc matches '/^http/' ? data.imageSrc : craft.vite.asset(data.imageSrc) }}');
                            background-size: cover;
                            background-position: center;

                            mask-image: url('{{ craft.vite.asset(data.maskSrc) }}');
                            -webkit-mask-image: url('{{ craft.vite.asset(data.maskSrc) }}');

                            mask-size: cover;
                            -webkit-mask-size: cover;
                            mask-repeat: no-repeat;
                            mask-position: right 102%;
                            -webkit-mask-position: right 102%;
                            ">
            </div>
        </div>

    </div>
</section>