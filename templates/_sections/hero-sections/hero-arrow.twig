{# templates/_sections/hero-sections/hero-arrow.twig #}

{% set sourceEntry = entry ?? craft.entries.section('accounting').one() %}
{% set heroImageAsset = props.imageAsset ?? entry.heroImage.one() ?? null %}
{% set arrowPath = '@webroot/dist/images/placeholder/Arrow_1.svg' %}

{% set defaults = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    heading: entry.title ?? 'Accounting',
    bodyText: entry.heroBodyText ?? '',
    buttonText: 'Book a call',
    buttonBgColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-foxplan-yellow',
    textColor: 'text-foxplan-charcoal-brown',

buttonUrl: props.buttonUrl ?? null
} %}

{% set data = defaults | merge(props ?? {}) %}

<section class="w-full pt-10 pb-10 {{ data.backgroundColor }} overflow-hidden"
         x-data="{ revealed: false }"
         x-init="setTimeout(() => revealed = true, 150)">

    <div class="flex flex-wrap w-full items-center mb-5 relative">
        <div class="hidden md:flex w-[30%] items-center justify-start pr-8 lg:pr-12">
            <div class="w-full h-8 flex items-center">
                <div class="transition-all duration-[2500ms] overflow-hidden"
                     :style="revealed ? 'width: 100%; opacity: 1;' : 'width: 0px; opacity: 0;'">
                    {{ svg(alias(arrowPath))|attr({
                        class: 'w-full h-auto block max-h-6 fill-current ' ~ data.textColor
                    }) }}
                </div>
            </div>
        </div>

        <div class="w-full md:w-[70%] px-4 md:px-6 lg:px-8">
            <h2 class="font-serif leading-[0.85] tracking-tight {{ data.textColor }} whitespace-nowrap lg:whitespace-normal"
                style="font-size: clamp(3rem, 8vw + 1rem, 7.5rem);">
    {{ data.heading | raw }}
    </h2>
    </div>
    </div>

    <div class="flex flex-wrap xl:flex-nowrap items-end">
        <div class="w-full xl:w-[70%] relative overflow-hidden">
            <div class="relative w-full aspect-[16/9] xl:aspect-[21/10] px-4 lg:px-6 xl:px-0">
                {% if heroImageAsset %}
                <img src="{{ heroImageAsset.url }}" class="w-full h-full object-cover">
                {% endif %}
            </div>
        </div>

        <div class="w-full xl:w-[30%] px-4 md:px-6 lg:px-8 space-y-4 pt-4 xl:pt-0">
            {% if data.bodyText %}
                <div class="font-aktiv-grotesk leading-relaxed {{ data.textColor }} font-medium break-words hyphens-none"
                     style="font-size: clamp(1rem, 0.7vw + 0.5rem, 1.25rem); word-break: keep-all;">
                    {{ data.bodyText | raw }}
                </div>
            {% endif %}

            {% if data.buttonText %}
                <div class="mt-2">
                    <div @click="showBookCallOverlay = true" class="cursor-pointer inline-block">
                        {% include '_components/ui/button/button.twig' with {
                            props: {
                                text: data.buttonText,
                                url: null,
                                backgroundColor: data.buttonBgColor,
                                textColor: data.buttonTextColor,
                                classes: 'px-10 py-4 text-[10px] tracking-[0.2em] font-bold uppercase rounded-none'
                            }
                        } only %}
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</section>