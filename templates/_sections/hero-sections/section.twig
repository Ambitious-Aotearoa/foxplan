{# 1. Map Backend Data #}
{% set sectionImage = entry.image.one() %}

{% set defaults = {
    title: entry.paragraphHeading3 ?? 'Get the First Home Buyers Guide',
    bodyText: entry.bodyText2 ?? '',
    buttonText: entry.button2 ?? '',
    buttonLink: (entry.buttonlink2 is defined and entry.buttonlink2) ? entry.buttonlink2.url : '#',
    imageSrc: sectionImage ? sectionImage.url : null,
    backgroundColor: 'bg-foxplan-yellow',
    textColor: 'text-foxplan-charcoal-brown',
    buttonBgColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-foxplan-yellow',
    borderColor: 'border-foxplan-charcoal-brown'
} %}

{% set data = defaults | merge(props ?? {}) %}

<section class="{{ data.backgroundColor }} w-full overflow-hidden border-t {{ data.borderColor }}">
    {# Applied a fixed 20px padding to the left and right #}
    <div class="px-[20px] pt-16 pb-16 md:pt-24 md:pb-24">

        <div class="flex flex-wrap md:flex-nowrap w-full items-center gap-0">

            {# Left Column: 30% Width #}
            <div class="w-full md:w-[30%] pr-8 lg:pr-12">
                <div class="max-w-md">
                    <h2 class="font-serif text-5xl md:text-6xl lg:text-[4.5rem] font-normal {{ data.textColor }} leading-[0.85] tracking-tight {{ (data.bodyText or data.buttonText) ? 'mb-8' : '' }}">
                        {{ data.title | raw }}
                    </h2>

                    {% if data.bodyText is not empty %}
                        <div class="font-aktiv-grotesk text-base md:text-lg {{ data.textColor }} leading-relaxed {{ data.buttonText ? 'mb-10' : '' }}">
                            {{ data.bodyText | raw }}
                        </div>
                    {% endif %}

                    {% if data.buttonText is not empty %}
                        <div>
                            {% include '_components/ui/button/button.twig' with {
                                props: {
                                    text: data.buttonText,
                                    url: data.buttonLink,
                                    backgroundColor: data.buttonBgColor,
                                    textColor: data.buttonTextColor,
                                    classes: 'px-10 py-5 text-xs tracking-widest uppercase inline-flex items-center gap-2'
                                }
                            } only %}
                        </div>
                    {% endif %}
                </div>
            </div>

            {# Right Side: 70% Width #}
            <div class="w-full md:w-[70%]">
                <div class="w-full relative overflow-hidden">
                    {# Height maintained at 650px as requested previously #}
                    {% set imgClasses = "w-full h-[400px] md:h-[550px] lg:h-[650px] object-cover block" %}

                    {% if data.imageSrc %}
                        <img src="{{ data.imageSrc }}"
                             alt="{{ data.title|striptags }}"
                             class="{{ imgClasses }}">
                    {% else %}
                        <img src="{{ craft.vite.asset('images/Insights_4.jpg') }}"
                             alt="{{ data.title|striptags }}"
                             class="{{ imgClasses }}">
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</section>