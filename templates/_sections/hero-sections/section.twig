{# 1. Map Backend Data using confirmed handles #}
{% set sectionImage = entry.image.one() %}

{# Since buttonUrl is 'Plain Text', we fetch it directly as a string #}
{% set rawUrl = entry.buttonUrl ?? '' %}

{% set defaults = {
    title: entry.paragraphHeading2 ?? 'Get the First Home Buyers Guide',
    bodyText: entry.bodyText2 ?? '',
    buttonText: entry.button2 ?? '',
    imageSrc: sectionImage ? sectionImage.url : null,
    buttonUrl: rawUrl ? (rawUrl|first == '/' or 'http' in rawUrl ? rawUrl : '/' ~ rawUrl) : '#',
    backgroundColor: 'bg-foxplan-yellow',
    textColor: 'text-foxplan-charcoal-brown',
    buttonBgColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-foxplan-yellow',
    borderColor: 'border-foxplan-charcoal-brown'
} %}

{% set data = defaults | merge(props ?? {}) %}

<section class="{{ data.backgroundColor }} w-full overflow-hidden border-t {{ data.borderColor }}">
    <div class="px-[20px] pt-16 pb-16 md:pt-24 md:pb-24">
        <div class="flex flex-wrap md:flex-nowrap w-full items-center gap-0">

            {# Left Column: 30% Width #}
            <div class="w-full md:w-[30%] pr-8 lg:pr-12">
                <div class="max-w-md">
                    <h2 class="font-serif text-5xl md:text-6xl lg:text-[4.5rem] font-normal {{ data.textColor }} leading-[0.85] tracking-tight {{ (data.bodyText or data.buttonText) ? 'mb-8' : '' }}">
                        {{ data.title | raw }}
                    </h2>

                    {% if data.bodyText is not empty %}
                        <div class="font-aktiv-grotesk text-base md:text-lg {{ data.textColor }} leading-relaxed {{ data.buttonText ? 'mb-10' : '' }}">
                            {{ data.bodyText | raw }}
                        </div>
                    {% endif %}

                    {% if data.buttonText is not empty %}
                    {# IMPORTANT: The @click must be on a wrapper that Alpine can see #}
                    <div @click="showFirstHomeOverlay = true" class="cursor-pointer inline-block">
                        {% include '_components/ui/button/button.twig' with {
                        props: {
                        text: data.buttonText,
                        url: null,
                        backgroundColor: data.buttonBgColor,
                        textColor: data.buttonTextColor
                        }
                        } only %}
                    </div>
                    {% endif %}
                </div>
            </div>

            {# Right Side: 70% Width #}
            <div class="w-full md:w-[70%]">
                <div class="w-full relative overflow-hidden">
                    {% set imgClasses = "w-full h-[400px] md:h-[550px] lg:h-[650px] object-cover block" %}
                    {% if data.imageSrc %}
                        <img src="{{ data.imageSrc }}" alt="{{ data.title|striptags }}" class="{{ imgClasses }}">
                    {% else %}
                        <img src="{{ craft.vite.asset('images/Insights_4.jpg') }}" alt="{{ data.title|striptags }}" class="{{ imgClasses }}">
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</section>