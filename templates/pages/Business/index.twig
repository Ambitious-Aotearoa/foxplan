{% extends "_boilerplate/_layouts/layout-base.twig" %}

{% set navigationTheme = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-black',
    actionBgColor: 'bg-foxplan-charcoal-brown'
} %}

{% block blockAppBody %}

    {# 1. Hero Section #}
    {% set pageHeading = (entry.title is defined and entry.title|length) ? entry.title : 'Insurance' %}
    {% set pageBody = (entry.heroBodyText is defined and entry.heroBodyText|length) ? entry.heroBodyText : 'Kiwis are a laidback bunch, but our ‘she’ll be right’ attitude also means that many of us are underinsured.' %}
    {% set pageButton = (entry.button is defined and entry.button|length) ? entry.button : 'Get in touch' %}
    {% set pageHeroImage = entry.heroImage.one() ?? null %}

    {{ include('_sections/hero-sections/hero-arrow.twig', {
        props: {
            heading: pageHeading,
            bodyText: pageBody,
            buttonText: pageButton,
            imageAsset: pageHeroImage,
            imagePath: 'images/Insurance_hero.jpg',
            backgroundColor: 'bg-foxplan-neutral-beige',
            buttonUrl: '/contact',
            buttonBgColor: 'bg-foxplan-charcoal-brown',
            buttonTextColor: 'text-foxplan-white'
        }
    }) }}

    {#2. Benefits #}
    {% include "_sections/content-sections/how-we-work.twig" with {
        entry: entry,
        props: {
            backgroundColor: 'bg-foxplan-yellow',
            textColor: 'text-foxplan-charcoal-brown',
            mainHeading: entry.paragraphHeading ?? 'How we work with you',
            mainBody: entry.bodyText ?? '',
        }
    } %}

    {# 3. Services Grid #}
    {% set serviceItems = [] %}

    {% if entry.infoBlock is defined %}
        {% for block in entry.infoBlock.all() %}
            {% set serviceItems = serviceItems | merge([{
                'title': block.blockHeading ?? 'Service Title',
                'text': block.blockBodyText ?? '',
                'link': block.blockLinkUrl ?? '#'
            }]) %}
        {% endfor %}
    {% endif %}


    {{ include('_sections/services/our-services.twig', {
        props: {
            title: entry.paragraphHeading3 ?? 'Our Services',
            backgroundColor: 'bg-foxplan-neutral-beige',
            buttonBgColor: 'bg-foxplan-charcoal-brown',
            buttonTextColor: 'text-white',
            items: serviceItems
        }
    }) }}

    {# 4. Partner Section #}
{#    {{ include('_sections/content-sections/who-we-work-with.twig', {#}
{#        props: {#}
{#            title: 'WHO WE WORK WITH',#}
{#            backgroundColor: 'bg-foxplan-yellow',#}
{#            textColor: 'text-foxplan-charcoal-brown',#}
{#            borderColor: 'border-foxplan-charcoal-brown/20',#}
{#            logos: [#}
{#                { src: 'images/logo/AIA_Logo.svg', alt: 'AIA', name: 'AIA Insurance' },#}
{#                { src: 'images/logo/ANZ_Logo.svg', alt: 'ANZ', name: 'ANZ Bank' },#}
{#                { src: 'images/logo/BNZ_Logo.svg', alt: 'BNZ', name: 'BNZ Bank' },#}
{#                { src: 'images/logo/Kiwibank_Logo.svg', alt: 'Kiwibank', name: 'Kiwibank' },#}
{#                { src: 'images/logo/SBS-Bank_LowQuality_Logo.svg', alt: 'SBS', name: 'SBS Bank' },#}
{#                { src: 'images/logo/The_Co-operative_Bank_Logo.svg', alt: 'Co-op', name: 'The Co-operative Bank' },#}
{#                { src: 'images/logo/Westpac_logo.svg', alt: 'Westpac', name: 'Westpac' },#}
{#                { src: 'images/logo/The_Co-operative_Bank_Logo.svg', alt: 'iag', name: 'IAG Group' }#}
{#            ]#}
{#        }#}
{#    }) }}#}


    {# Fetch the entries here in the entry template #}
    {% set testimonialEntries = craft.entries().section('testimonials').all() %}

    {{ include('_sections/testimonials/testimonial-two.twig', {
        data: {
            paragraphHeading4: block.paragraphHeading4 ?? 'Hear what our clients are saying'
        },
        testimonials: testimonialEntries
    }) }}
    {# footer #}
    {{ include('_components/footer/footer-High-fidelity.twig', {
        props: {
            backgroundColor: 'bg-foxplan-charcoal-brown',
            textColor: 'text-foxplan-yellow',
            logoColor: 'text-foxplan-yellow',
            buttonColor: 'bg-foxplan-yellow',
            buttonTextColor: 'text-foxplan-charcoal-brown',
            separatorColor: 'text-foxplan-yellow'
        }
    }) }}

{% endblock %}