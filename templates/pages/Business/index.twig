{% extends "_boilerplate/_layouts/layout-base.twig" %}

{% set navigationTheme = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-foxplan-charcoal-brown',
    actionBgColor: 'bg-foxplan-charcoal-brown'
} %}

{% block blockAppBody %}

    {# 1. Initialize shared state for the booking overlay #}
    <div x-data="{ showBookCallOverlay: false }" class="relative">

        {# 2. Hero Section #}
        {{ include('_sections/hero-sections/hero-arrow.twig', {
            props: {
                buttonUrl: '#',
                backgroundColor: 'bg-foxplan-neutral-beige',
                buttonBgColor: 'bg-foxplan-charcoal-brown',
                buttonTextColor: 'text-foxplan-neutral-beige'
            }
        }) }}

        {# 3. Benefits #}
        {% include "_sections/content-sections/how-we-work.twig" with {
            entry: entry,
            props: {
                backgroundColor: 'bg-foxplan-yellow',
                textColor: 'text-foxplan-charcoal-brown',
                mainHeading: entry.paragraphHeading ?? 'How we work with you',
                mainBody: entry.bodyText ?? '',
            }
        } %}

        {# 4. Services Grid #}
        {% set serviceItems = [] %}

        {% if entry.infoBlock is defined %}
            {% for block in entry.infoBlock.all() %}
                {% set serviceItems = serviceItems | merge([{
                    'title': block.blockHeading ?? 'Service Title',
                    'text': block.blockBodyText ?? '',
                    'link': block.blockLinkUrl ?? '#'
                }]) %}
            {% endfor %}
        {% endif %}


        {{ include('_sections/services/our-services.twig', {
            props: {
                title: entry.paragraphHeading3 ?? 'Our Services',
                backgroundColor: 'bg-foxplan-neutral-beige',
                buttonBgColor: 'bg-foxplan-charcoal-brown',
                buttonTextColor: 'text-white',
                items: serviceItems
            }
        }) }}



        {# 5. Testmonials #}
        {% set testimonialEntries = craft.entries().section('testimonials').all() %}

        {{ include('_sections/testimonials/testimonial-two.twig', {
            data: {
                paragraphHeading4: block.paragraphHeading4 ?? 'Hear what our clients are saying'
            },
            testimonials: testimonialEntries
        }) }}

        {# 6. Footer #}
        {{ include('_components/footer/footer-High-fidelity.twig', {
            props: {
                backgroundColor: 'bg-foxplan-charcoal-brown',
                textColor: 'text-foxplan-yellow',
                logoColor: 'text-foxplan-yellow',
                buttonColor: 'bg-foxplan-yellow',
                buttonTextColor: 'text-foxplan-charcoal-brown',
                separatorColor: 'text-foxplan-yellow'
            }
        }) }}

        {# 7. THE BOOKING OVERLAY #}
        {{ include('_sections/overlays/book-a-call.twig') }}

    </div>

{% endblock %}