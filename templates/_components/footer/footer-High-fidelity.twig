{# templates/_components/footer/footer.twig #}

{% set defaults = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-foxplan-charcoal-brown',
    logoColor: 'text-foxplan-charcoal-brown',
    logoPath: '@webroot/dist/images/FoxPlan_Logo.svg',
    buttonColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-foxplan-neutral-beige',
    foxplanText: 'foxplan',
    separatorColor: 'text-foxplan-charcoal-brown'
} %}

{% set data = defaults | merge(props | default({})) %}

<footer
        class="relative w-full h-[800px] overflow-hidden"
        style="clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);"
        x-data="{
        ratio: 0,
        updateRatio() {
            const rect = this.$el.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            const visibleHeight = Math.max(0, windowHeight - rect.top);
            this.ratio = Math.min(1, visibleHeight / rect.height);
        }
    }"
        @scroll.window="updateRatio()"
        x-init="updateRatio()"
>
    <div class="fixed bottom-0 left-0 w-full h-[800px] {{ data.backgroundColor }} flex flex-col justify-between">

        {# Content Wrapper that Scales #}
        <div
                class="max-w-full mx-auto px-8 pt-20 relative w-full transition-transform duration-75 ease-out"
                :style="`transform: scale(${0.9 + (ratio * 0.1)}); opacity: ${0.5 + (ratio * 0.5)};`"
        >

            {# 1. Main Grid #}
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 mb-10 items-start">
                {# Left Side: Logo and CTA #}
                <div class="lg:col-span-5">
                    <div class="mb-10 {{ data.logoColor }}">
                        {{ svg(alias(data.logoPath))|attr({ class: 'w-28 h-auto fill-current', alt: 'FoxPlan Logo' }) }}
                    </div>

                    <h2 class="text-fluid-h2 text-3xl md:text-5xl leading-none mb-6 {{ data.textColor }} tracking-tight uppercase">
                        Ready to reach your<br>financial goals?
                    </h2>

                    <p class="text-fluid-para-default mb-8 {{ data.textColor }} opacity-90 max-w-xs">
                        Book a chat with one of our financial advisers to get started.
                    </p>

                    {% include '_components/ui/button/button.twig' with {
                        props: {
                            text: 'Learn more',
                            url: '/contact-us',
                            style: 'primary',
                            backgroundColor: data.buttonColor,
                            textColor: data.buttonTextColor,
                            classes: 'px-4 py-1.5 text-fluid-button uppercase'
                        }
                    } only %}
                </div>

                {# Right Side: Links Grid #}
                <div class="lg:col-span-7 pt-1">
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-y-12 gap-x-8">

                        {# Column 1: Mortgages, Accounting, Location #}
                        <div class="flex flex-col gap-y-4">
                            <a href="/mortgages"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> MORTGAGES
                            </a>
                            <a href="/accounting"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> ACCOUNTING
                            </a>
                            <div class="pt-4">
                                <h3 class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 mb-3">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> LOCATION
                                </h3>
                                <div class="pl-4 text-fluid-para-sm leading-relaxed {{ data.textColor }} opacity-90">
                                    <p>Level 8</p>
                                    <p>138 The Terrace</p>
                                    <p>Wellington 6011</p>
                                </div>

                                <div class="pl-4 flex gap-2 mt-6">
                                    <a href="https://www.facebook.com/FoxPlanFinancialServices/"
                                       target="_blank"
                                       class="w-7 h-7 {{ data.buttonColor }} {{ data.buttonTextColor }} flex items-center justify-center text-[10px] rounded-sm transition-opacity hover:opacity-80">
                                        f
                                    </a>
                                    <a href="https://www.instagram.com/foxplan_financial/"
                                       target="_blank"
                                       class="w-7 h-7 {{ data.buttonColor }} {{ data.buttonTextColor }} flex items-center justify-center text-[10px] rounded-sm transition-opacity hover:opacity-80">
                                        ig
                                    </a>
                                    <a href="https://nz.linkedin.com/company/foxplanltd"
                                       target="_blank"
                                       class="w-7 h-7 {{ data.buttonColor }} {{ data.buttonTextColor }} flex items-center justify-center text-[10px] rounded-sm transition-opacity hover:opacity-80">
                                        in
                                    </a>
                                </div>
                            </div>
                        </div>

                        {# Column 2: Insurance, Business, Phone #}
                        <div class="flex flex-col gap-y-4">
                            <a href="/insurance"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> INSURANCE
                            </a>
                            <a href="/business"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> BUSINESS
                            </a>
                            <div class="pt-4">
                                <h3 class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 mb-3">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> PHONE
                                </h3>
                                <div class="pl-4 text-fluid-para-sm leading-relaxed {{ data.textColor }} opacity-90">
                                    <p>0800 NO STRESS</p>
                                    <p>(0800 667 873)</p>
                                    <p>Office (04) 918 4659</p>
                                </div>
                            </div>
                        </div>

                        {# Column 3: Savings, About Us, Legal #}
                        <div class="flex flex-col gap-y-4">
                            <a href="/savings-investment"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> SAVINGS & INVESTMENT
                            </a>
                            <a href="/about"
                               class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 hover:opacity-70 transition-opacity">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> ABOUT US
                            </a>
                            <div class="pt-4">
                                <h3 class="text-fluid-prehead font-bold {{ data.textColor }} flex items-center gap-2 mb-3">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> LEGAL
                                </h3>
                                <div class="pl-4 text-fluid-para-sm leading-relaxed space-y-1 {{ data.textColor }} opacity-90">
                                    <a href="#" class="block hover:underline transition-all">Privacy Policy</a>
                                    <a href="#" class="block hover:underline transition-all">Complaints</a>
                                    <a href="#" class="block hover:underline transition-all">Disclaimer</a>
                                    <a href="#" class="block hover:underline transition-all">Disclosure</a>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        {# 3. Giant Bottom Background Text #}
        <div class="w-full pointer-events-none pb-10">
            <h1
                    class="w-full text-[28vw] font-bold leading-[0.7] select-none tracking-[-0.06em] text-center {{ data.textColor }} transition-transform duration-75 ease-out"
                    :style="`transform: scale(${0.7 + (ratio * 0.3)}) translateY(${22 - (ratio * 5)}%);`"
            >
                {{ data.foxplanText }}
            </h1>
        </div>
    </div>
</footer>