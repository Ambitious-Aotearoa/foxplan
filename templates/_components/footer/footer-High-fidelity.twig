{# templates/_components/footer/footer.twig #}

{% set defaults = {
    backgroundColor: 'bg-foxplan-neutral-beige',
    textColor: 'text-foxplan-charcoal-brown',
    logoColor: 'text-foxplan-charcoal-brown',
    logoPath: '@webroot/dist/images/FoxPlan_Logo.svg',
    buttonColor: 'bg-foxplan-charcoal-brown',
    buttonTextColor: 'text-foxplan-neutral-beige',
    separatorColor: 'text-foxplan-charcoal-brown'
} %}

{% set data = defaults | merge(props | default({})) %}

{% set ctaTitleStyles = 'font-size: clamp(2.25rem, 5vw, 3rem); line-height: 0.85;' %}
{% set paraStyles = 'font-size: 16px; line-height: 1.2;' %}
{% set preheadStyles = 'font-size: 14px; line-height: 1; letter-spacing: 0.05em;' %}

<footer
        class="relative w-full h-[1100px] md:h-[950px] lg:h-[800px] overflow-hidden"
        style="clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);"
        x-data="{
        ratio: 0,
        updateRatio() {
            const rect = this.$el.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            const visibleHeight = Math.max(0, windowHeight - rect.top);
            this.ratio = Math.min(1, visibleHeight / rect.height);
        }
    }"
        @scroll.window="updateRatio()"
        x-init="updateRatio()"
>
    <div class="fixed bottom-0 left-0 w-full h-200 {{ data.backgroundColor }} flex flex-col justify-between">

        <div
                class="max-w-full mx-auto px-4 lg:px-8 pt-10 md:pt-40 lg:pt-40 relative z-10 w-full transition-transform duration-75 ease-out"
                :style="`transform: scale(${0.9 + (ratio * 0.1)}); opacity: ${0.5 + (ratio * 0.5)};`"
        >

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 mb-4 lg:mb-10 items-start">
                {# --- LEFT SIDE: LOGO & CTA --- #}
                <div class="lg:col-span-5">
                    <div class="mb-10 md:mb-4 md:pt-6 {{ data.logoColor }} block">
                        {{ svg(alias(data.logoPath))|attr({
                            class: 'w-32 md:w-28 h-auto fill-current',
                            alt: 'FoxPlan Logo',
                            role: 'img'
                        }) }}
                    </div>

                    <h2 class="font-serif tracking-tight {{ data.textColor }} mb-8 break-normal"
                        style="{{ ctaTitleStyles }} word-break: keep-all;">
                        Ready to reach your<br>financial goals?
                    </h2>

                    <p class="{{ data.textColor }} opacity-90 max-w-xs mb-8" style="{{ paraStyles }}">
                        Book a chat with one of our financial advisers to get started.
                    </p>

                    {% include '_components/ui/button/button.twig' with {
                        props: {
                            text: 'Get in Touch',
                            url: '/contact-us',
                            style: 'primary',
                            backgroundColor: data.buttonColor,
                            textColor: data.buttonTextColor,
                            classes: 'px-4 py-1.5 text-[10px] tracking-[0.2em] uppercase font-aktiv font-bold rounded-none'
                        }
                    } only %}
                </div>

                {# --- RIGHT SIDE: LINKS GRID --- #}
                <div class="lg:col-span-7 pt-10">
                    <div class="grid grid-cols-2 lg:grid-cols-3 gap-y-6 lg:gap-y-12 gap-x-8">

                        <div class="flex flex-col gap-y-4">
                            <a href="/mortgages" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> MORTGAGES
                            </a>
                            <a href="/accounting" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> ACCOUNTING
                            </a>
                            <div class="pt-4">
                                <h3 class="font-bold {{ data.textColor }} flex items-center gap-2 mb-3"
                                    style="{{ preheadStyles }}">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> LOCATION
                                </h3>
                                <div class="pl-4 {{ data.textColor }} opacity-90" style="{{ paraStyles }}">
                                    <p>Level 8, 138 The Terrace</p>
                                    <p>Wellington 6011</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-y-4">
                            <a href="/insurance" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> INSURANCE
                            </a>
                            <a href="/business" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> BUSINESS
                            </a>
                            <div class="pt-4">
                                <h3 class="font-bold {{ data.textColor }} flex items-center gap-2 mb-3"
                                    style="{{ preheadStyles }}">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> PHONE
                                </h3>
                                <div class="pl-4 {{ data.textColor }} opacity-90" style="{{ paraStyles }}">
                                    <p>0800 NO STRESS</p>
                                    <p>(0800 667 873)</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-y-4">

                            <a href="/savingS-investment" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> SAVINGS & INVESTMENT
                            </a>
                            <a href="/about" class="font-bold {{ data.textColor }} flex items-center gap-2"
                               style="{{ preheadStyles }}">
                                <span class="{{ data.separatorColor }} opacity-40">|</span> ABOUT US
                            </a>
                            <div class="pt-4">
                                <h3 class="font-bold {{ data.textColor }} flex items-center gap-2 mb-3"
                                    style="{{ preheadStyles }}">
                                    <span class="{{ data.separatorColor }} opacity-40">|</span> LEGAL
                                </h3>
                                <div class="pl-4 space-y-1 {{ data.textColor }} opacity-90" style="{{ paraStyles }}">
                                    <a href="/pages/Privacy" class="block">Privacy Policy</a>
                                    <a href="/pages/Complaints-Policy" class="block">Complaints</a>
                                </div>
                            </div>


                        </div>

                        {# SOCIAL LINKS #}
                        {% set facebookUrl = socialLinks.facebook ?? null %}
                        {% set instagramUrl = socialLinks.instagram ?? null %}
                        {% set linkedinUrl = socialLinks.linkedin ?? null %}

                        <div class="flex gap-3 pt-4">
                            {# FACEBOOK #}
                            {% if facebookUrl %}
                                {{ include('_components/ui/icons/facebook-icon.twig', {
                                    props: {
                                        iconColor: 'fill-white',
                                        boxColor: 'bg-[#1D1013]',
                                        size: 'w-8 h-8',
                                        url: facebookUrl
                                    }
                                }) }}
                            {% endif %}

                            {# INSTAGRAM #}
                            {% if instagramUrl %}
                                {{ include('_components/ui/icons/instagram-icon.twig', {
                                    props: {
                                        iconColor: 'fill-white',
                                        boxColor: 'bg-[#1D1013]',
                                        size: 'w-8 h-8',
                                        url: instagramUrl
                                    }
                                }) }}
                            {% endif %}

                            {# LINKEDIN #}
                            {% if linkedinUrl %}
                                {{ include('_components/ui/icons/linkedin-icon.twig', {
                                    props: {
                                        iconColor: 'fill-white',
                                        boxColor: 'bg-[#1D1013]',
                                        size: 'w-8 h-8',
                                        url: linkedinUrl
                                    }
                                }) }}
                            {% endif %}

                        </div>

                    </div>
                </div>
            </div>
        </div>

        {# ---  GIANT BACKGROUND TEXT --- #}
        <div class="w-full pointer-events-none pb-0">
            <h1
                    class="w-full text-[28vw] font-bold leading-[0.7] select-none tracking-[-0.06em] text-center {{ data.textColor }}
                           mt-7   lg:translate-y-0 transition-transform duration-75 ease-out"
                    :style="`transform: scale(${0.7 + (ratio * 0.3)}) translateY(${22 - (ratio * 5)}%);`"
            >
              foxplan
            </h1>
        </div>
    </div>
</footer>