{# templates/_components/nav/nav.twig #}

{# --- 1. Define Reusable Defaults --- #}
{% set defaultTheme = {
    backgroundColor: 'bg-[#F9C33D]',
    textColor: 'text-[#270E15]',
    searchBgColor: 'bg-[#1D090E]',
    ctaBgColor: 'bg-[#1D090E]',
    iconColor: 'text-white',
    logoFilter: ''
} %}

{# --- 2. Safe Merge Logic --- #}
{% set theme = (navigationTheme is defined and navigationTheme is iterable)
    ? defaultTheme|merge(navigationTheme)
    : defaultTheme
%}

<nav class="w-full">
    <div class="w-full {{ theme.backgroundColor }} transition-colors duration-300">
        <div class="flex justify-between items-center h-16">

            {# LEFT: Logo (Size Increased to h-11 / 44px) #}
            <a href="/" class="flex items-center h-full pl-8">
                <img src="{{ craft.vite.asset('images/FoxPlan_Logo.svg') }}"
                     alt="FoxPlan Logo"
                        {# Changed h-8 to h-11 for a larger, clearer presence #}
                     class="h-11 w-auto transition-all duration-300 {{ theme.logoFilter }}">
            </a>

            {# CENTER: Links #}
            <div class="hidden lg:flex items-center gap-x-12 text-[15px] font-medium {{ theme.textColor }} mx-auto font-aktiv tracking-tight">
                {% set navItems = [
                    { title: 'Accounting', url: '/pages/Accounting' },
                    { title: 'Insurance', url: '/pages/Insurance' },
                    { title: 'Savings and Investments', url: '/pages/Saving-and-Investment' },
                    { title: 'Mortgages', url: '/pages/Mortgages' },
                    { title: 'News', url: '#' },
                    { title: 'About', url: '#' }
                ] %}
                {% for item in navItems %}
                    <a href="{{ item.url }}" class="hover:opacity-60 transition duration-150 whitespace-nowrap">{{ item.title }}</a>
                {% endfor %}
            </div>

            {# RIGHT: Buttons Section #}
            <div class="flex items-center h-full">

                {# SEARCH BUTTON #}
                <button class="w-16 h-16 flex items-center justify-center {{ theme.searchBgColor }} border-r border-white/10 hover:brightness-110 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="{{ theme.iconColor }}">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>

                {# GET IN TOUCH BUTTON #}
                <div class="h-16 flex items-center">
                    {% include '_components/ui/button/button.twig' with {
                        props: {
                            text: 'Get in touch',
                            url: '/contact',
                            style: 'none',
                            backgroundColor: theme.ctaBgColor,
                            textColor: 'text-white',
                            classes: 'h-16 px-10 flex items-center text-[15px] font-medium hover:brightness-110 transition-all font-aktiv group rounded-none'
                        }
                    } only %}
                </div>
            </div>
        </div>
    </div>
</nav>