{# templates/_components/ui/tabs/tabs-services.twig #}

{% set defaults = {
    tabs: [],
    navBg: 'bg-foxplan-yellow',
    activeBg: 'bg-foxplan-charcoal-brown',
    activeText: 'text-foxplan-yellow',
    inactiveText: 'text-foxplan-charcoal-brown/60',
    hoverText: 'hover:text-foxplan-charcoal-brown',
} %}

{% set props = defaults | merge(props ?? {}) %}

<nav class="w-full {{ props.navBg }} sticky top-0 z-20" x-data="{ dropdownOpen: false }">

    {# --- MOBILE DROPDOWN (Small Screens Only) --- #}
    <div class="lg:hidden w-full relative">
        <button
                type="button"
                @click="dropdownOpen = !dropdownOpen"
                class="w-full py-6 px-6 flex items-center justify-between {{ props.activeBg }} {{ props.activeText }} text-[10px] font-bold uppercase tracking-[0.2em] font-aktiv transition-all duration-300"
        >
            {# Dynamic Label Fetching based on props.tabs #}
            <span x-text="{% if props.tabs|length > 0 %} {{ props.tabs|json_encode }}.find(t => t.id === activeTab)?.label || 'Select Category' {% else %} 'Select Category' {% endif %}"></span>
            <svg class="w-4 h-4 transition-transform duration-300" :class="dropdownOpen ? 'rotate-180' : ''" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
        </button>

        <div
                x-show="dropdownOpen"
                x-cloak
                @click.away="dropdownOpen = false"
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 -translate-y-2"
                x-transition:enter-end="opacity-100 translate-y-0"
                class="absolute top-full left-0 w-full {{ props.navBg }} shadow-xl z-30"
        >
            {% for tab in props.tabs %}
                <button
                        type="button"
                        @click="activeTab = '{{ tab.id }}'; dropdownOpen = false"
                        :class="activeTab === '{{ tab.id }}' ? '{{ props.activeBg }} {{ props.activeText }}' : '{{ props.inactiveText }}'"
                        class="w-full py-5 px-6 text-left text-[10px] font-bold uppercase tracking-[0.2em] font-aktiv border-b border-foxplan-charcoal-brown/10"
                >
                    {{ tab.label }}
                </button>
            {% endfor %}
        </div>
    </div>

    {# --- DESKTOP GRID (Large Screens Only) --- #}
    <div class="hidden lg:grid lg:grid-cols-{{ props.tabs|length }} w-full">
        {% for tab in props.tabs %}
            <button
                    type="button"
                    @click="activeTab = '{{ tab.id }}'"
                    :class="activeTab === '{{ tab.id }}' ? '{{ props.activeBg }} {{ props.activeText }}' : '{{ props.inactiveText }} {{ props.hoverText }}'"
                    class="relative py-6 px-4 text-center text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] font-aktiv transition-all duration-500 outline-none group overflow-hidden"
            >
                <span class="relative z-10">{{ tab.label }}</span>

                <div
                        class="absolute bottom-0 left-0 w-full h-[2px] bg-current transition-transform duration-500 origin-center scale-x-0 group-hover:scale-x-100"
                        :class="activeTab === '{{ tab.id }}' ? 'hidden' : ''"
                ></div>
            </button>
        {% endfor %}
    </div>
</nav>