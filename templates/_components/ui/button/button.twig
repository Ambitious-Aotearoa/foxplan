{# _components/ui/button/button.twig #}

{# Set component defaults #}
{% set defaults = {
    text: 'Button',
    style: 'primary',
    size: 'medium',
    url: null,
    icon: null,
    iconPosition: 'left',
    fullWidth: false,
    disabled: false,
    backgroundColor: null,
    textColor: null,
    classes: '',
    attributes: {}
} %}

{# Merge with passed props #}
{% set props = defaults | merge(props | default({})) %}

{# Dynamic Color Logic #}
{% set bgClass = props.backgroundColor ?: (
    props.style == 'primary' ? 'bg-foxplan-charcoal-brown' :
    props.style == 'secondary' ? 'bg-foxplan-charcoal-brown' :
    props.style == 'default-round' ? 'bg-foxplan-yellow' :
    props.style == 'outline' ? 'bg-transparent' : 'bg-foxplan-charcoal-brown'
    ) %}

{% set textClass = props.textColor ?: (
    props.style == 'primary' ? 'text-white' :
    props.style == 'secondary' ? 'text-white' :
    props.style == 'default-round' ? 'text-foxplan-charcoal-brown' :
    props.style == 'outline' ? 'text-foxplan-charcoal-brown' : 'text-white'
    ) %}

    {# Build CSS classes #}
{% set buttonClasses = [
    'group relative inline-flex items-center justify-center overflow-hidden',
    'font-sterling text-sm uppercase cursor-pointer',
    'py-2 px-6 text-[10px] font-bold tracking-widest',
    'transition-all duration-300',
    'w-full lg:w-auto',
    bgClass,
    textClass,

    'hover:opacity-80 active:opacity-100',
    props.style == 'secondary' ? 'rounded-full',
    props.style == 'default-round' ? 'rounded-none',
    props.style == 'outline' ? 'border border-foxplan-charcoal-brown',
    props.fullWidth ? '!w-full',
    props.disabled ? 'opacity-50 cursor-not-allowed',
    props.classes
] | filter | join(' ') %}

        {# Determine tag type #}
        {% set tag = props.url and not props.disabled ? 'a' : 'button' %}

        {# Build attributes #}
        {% set attributes = {
            class: buttonClasses,
            href: props.url ?: null,
            disabled: props.disabled ?: null,
            type: tag == 'button' ? 'button' : null
        } | merge(props.attributes) | filter %}

<{{ tag }}{% for attr, value in attributes %} {{ attr }}="{{ value }}"{% endfor %}>
<span class="btn__text flex items-center">
    {{ props.text }}

    {% if props.style == 'default-round' %}
        <svg class="ml-2 w-3 h-3 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor"
             viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
        </svg>
    {% endif %}
        </span>
</{{ tag }}>